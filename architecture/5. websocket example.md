Hereâ€™s a simple example demonstrating how to implement WebSocket communication for two-way updates using Angular on the frontend and Python (Flask-SocketIO) on the backend.


### Example: WebSocket with Angular and Python (Flask-SocketIO)

This example demonstrates how to use WebSocket for two-way communication between the backend and frontend. We'll use **Angular** for the UI and **Flask-SocketIO** for the backend.

#####  Backend (Python - Flask-SocketIO)

1. Install the necessary Python libraries using `pip`:

```bash
pip install flask flask-socketio
```

2. Create a simple Flask app (app.py) that uses WebSocket for two-way communication.   

```python
from flask import Flask, render_template
from flask_socketio import SocketIO, send, emit

app = Flask(__name__)
app.config['SECRET_KEY'] = 'secret!'
socketio = SocketIO(app)

@socketio.on('message')
def handle_message(message):
    print('Received message: ' + message)
    send('Server received: ' + message, broadcast=True)

@socketio.on('custom_event')
def handle_custom_event(json_data):
    print('Received json: ' + str(json_data))
    emit('response', {'data': 'Server received your data'}, broadcast=True)

if __name__ == '__main__':
    socketio.run(app, debug=True)
```

* Explanation:
- The SocketIO object is initialized with Flask.
- The handle_message function processes incoming messages and broadcasts a response to all connected clients.
- The handle_custom_event function receives JSON data and emits a response back to the clients.
The server broadcasts the response to all connected clients using send and emit.

#### Frontend (Angular)

1. Install the ngx-socket-io package to make WebSocket integration easier in Angular:

```bash
npm install ngx-socket-io
```

2. Create a configuration for the WebSocket connection.

```javascript
// src/app/socket-config.ts
import { SocketIoConfig } from 'ngx-socket-io';

export const config: SocketIoConfig = { url: 'http://localhost:5000', options: {} };
```

3. Create an Angular service to handle WebSocket communication.
    
```javascript
// src/app/services/websocket.service.ts
import { Injectable } from '@angular/core';
import { Socket } from 'ngx-socket-io';

@Injectable({
providedIn: 'root'
})
export class WebSocketService {
message = this.socket.fromEvent<string>('message');
response = this.socket.fromEvent<string>('response');

constructor(private socket: Socket) {}

sendMessage(msg: string) {
    this.socket.emit('message', msg);
}

sendCustomEvent(data: any) {
    this.socket.emit('custom_event', data);
}
}
```

4. In your Angular component, subscribe to WebSocket updates.

```javascript
    // src/app/components/chat/chat.component.ts
    import { Component, OnInit } from '@angular/core';
    import { WebSocketService } from '../../services/websocket.service';

    @Component({
    selector: 'app-chat',
    template: `
        <div>
        <h3>WebSocket Communication</h3>
        <input [(ngModel)]="message" placeholder="Enter message">
        <button (click)="sendMessage()">Send Message</button>

        <div *ngIf="receivedMessage">
            <h4>Received from Server:</h4>
            <p>{{ receivedMessage }}</p>
        </div>
        </div>
    `,
    styleUrls: ['./chat.component.css']
    })
    export class ChatComponent implements OnInit {
    message: string = '';
    receivedMessage: string = '';

    constructor(private webSocketService: WebSocketService) {}

    ngOnInit(): void {
        this.webSocketService.message.subscribe((msg: string) => {
        this.receivedMessage = msg;
        });
    }

    sendMessage(): void {
        this.webSocketService.sendMessage(this.message);
    }
    }`
```

* Explanation:
- The WebSocketService uses ngx-socket-io to open a WebSocket connection to the backend.
- In ChatComponent, the user can send a message to the server using the input field, and any messages received from the server will be displayed.
- The server broadcasts the message, which is updated in real-time in the UI using WebSocket.

1. Add WebSocket configuration to AppModule.

```javascript
    // src/app/app.module.ts
    import { NgModule } from '@angular/core';
    import { BrowserModule } from '@angular/platform-browser';
    import { FormsModule } from '@angular/forms';
    import { AppComponent } from './app.component';
    import { ChatComponent } from './components/chat/chat.component';
    import { SocketIoModule } from 'ngx-socket-io';
    import { config } from './socket-config';

    @NgModule({
    declarations: [
        AppComponent,
        ChatComponent
    ],
    imports: [
        BrowserModule,
        FormsModule,
        SocketIoModule.forRoot(config)
    ],
    providers: [],
    bootstrap: [AppComponent]
    })
    export class AppModule { }
```



#### Running the Example

1. Start the Flask Backend:
- Run the Python backend with the following command:
``` bash
    python app.py
```

2. Start the Angular Frontend:
- If you have Angular installed, run the frontend with:

```bash
    ng serve
```

3. Open your browser and navigate to the Angular app (http://localhost:4200). You can enter messages and see them reflected in real-time between the Angular frontend and Flask backend using WebSocket.

#### Conclusion
This example demonstrates how to implement WebSocket for two-way real-time communication between an Angular frontend and a Flask-SocketIO backend. WebSocket allows for efficient, low-latency communication, making it ideal for real-time applications like chat systems, live updates, and more.